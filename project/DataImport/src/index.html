<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">

  <title>DataImport</title>
  <link rel="stylesheet" href="./css/base.css">
  <link rel="stylesheet" href="./css/transform.css">
  <link rel="stylesheet" href="./css/msgpanel.css">
  <link rel="stylesheet" href="./css/bootstrap-frm.css">
  <style media="screen">
  #mainPanel {
    height: 500px;
    width: 900px;
  }

  #title {
    line-height: 120px;
    margin: 0 auto;
    border-bottom: black 5px solid;
    height: 120px;
    width: 600px;
    text-align: center;
    font-size: 55px;
  }

  #buttons {
    margin: 20px auto 0;
    height: 300px;
    width: 700px;
  }

  #fileuploadPanel{
    width: 1000px;
  }

  #secondPanel{
    width: 1200px;
    height: 635px;
  }

  #mappingArea{
    width: 1000px;
    height: 535px;
    margin: 10px auto 0;
    position: absolute;
    left: 0;
    right: 0;
    text-align: center;
  }

  #homesidebut{
    bottom: 10%;
    background-color: rgb(32,28,28);

  }
  #homesidebut:hover{
    background-color: rgb(106,98,98);
  }

  #homesidebut:active {
    transform: translateY(5px);
  }
  </style>
</head>

<body>

  <button id="homesidebut" class="sidebut unselectable">
    Home
  </button>

  <!-- 主面板 -->
  <div id="mainPanel" class="panel showPanel">
    <div id="title">
      <span>“ Data Import Tools ”</span>
    </div>
    <div id="buttons">
      <div class="ar">
        <button id="bt2" class="unselectable bt indexbt">数据库导出数据</button>
      </div>
      <div class="ar">
        <button id="bt1" class="unselectable bt indexbt">导入至数据库</button>
      </div>
      <div class="ar">
        <button id="bt4" class="unselectable bt indexbt">文件格式转换</button>
      </div>
      <div class="ar">
        <button id="bt3" class="unselectable bt indexbt">数据库之间转换</button>
      </div>
    </div>
  </div>

  <!-- 文件上传面板 -->
  <div id="fileuploadPanel" class="panel hidePanel">
    <span id="panelSubtitle" class="subtitle unselectable"></span>
    <span id="panelIntroduce" class="introduce unselectable"></span>
    <button id="uploadbutton" class="unselectable bt funcbt">文件上传</button>
  </div>

  <!-- 映射面板 -->
  <div id="secondPanel" class="panel hidePanel">
    <span class="subtitle unselectable">Mapping</span>
    <div id="mappingArea" class="bootstrap-frm"></div>
    <button id="mappingbut" type="button" class="funcbt bt pexit">确定映射</button>
  </div>

  <!-- 消息弹窗 -->
  <div class="curtain unselectable" id="c2">
    <div class="msgpanel hidePanel" id="p2">
      <div class="ptitle">

      </div>
      <div class="pmessage">
      </div>
      <button class="bt funcbt pexit" id="pexit2">好的</button>
    </div>
  </div>

  <script type="text/javascript" src="./js/tool.js"></script>
  <script type="text/javascript" src="./js/main.js"></script>
  <script type="text/javascript" src="./js/AjaxReq.js"></script>
  <script type="text/javascript" src="./js/butfunc.js"></script>
  <script type="text/javascript">
  var pexit2 = document.getElementById('pexit2')
  var c2 = document.getElementById('c2')
  var p2 = document.getElementById('p2')


  var mainPanel = document.getElementById('mainPanel')
  var bt1 = document.getElementById('bt1')
  var fileuploadPanel = document.getElementById('fileuploadPanel')
  var uploadbutton = document.getElementById('uploadbutton')
  var panelSubtitle = document.getElementById('panelSubtitle')
  var panelIntroduce = document.getElementById('panelIntroduce')
  var acceptableFileArr

  var mappingbut = document.getElementById('mappingbut')
  mappingbut.onclick = sendMapping

  var bt2 = document.getElementById('bt2')

  bt1.onclick = function () {
    acceptableFileArr = ['jpg', 'png']
    panelSubtitle.innerHTML = '导入至数据库'
    panelIntroduce.innerHTML = '说明：请将xlsx、xls、csv格式文件导入，然后系统会返回源文件中的列名，' +
    '然后需要您手动建立映射关系。' + '<br/>' + '我们支持以上格式的文件数据转换至Mysql或者MongoDB里。'
    hideMainPanel(mainPanel)
    showSecondPanel(fileuploadPanel)
    uploadbutton.onclick = function () {
      upload(1024, acceptableFileArr, 'http://localhost:8080/ajax', uploadOne)
    }
  }

  bt2.onclick = function () {
    // acceptableFileArr = ['xls', 'xlsx', 'csv']
    acceptableFileArr = ['sql', 'json']
    panelSubtitle.innerHTML = '数据库导出数据'
    panelIntroduce.innerHTML = '说明：请将MySQL数据库导出的.sql文件或者MongoDB数据库导出的.json文件上传。' +
    '<br/>' + ''
    hideMainPanel(mainPanel)
    showSecondPanel(fileuploadPanel)
    uploadbutton.onclick = function () {
      upload(1024, acceptableFileArr, 'http://localhost:8080/ajax', uploadTwo)
    }
  }

  </script>
</body>

</html>
