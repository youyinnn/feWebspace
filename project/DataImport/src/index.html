<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">

  <title>DataImport</title>
  <link rel="stylesheet" href="./css/base.css">
  <link rel="stylesheet" href="./css/transform.css">
  <link rel="stylesheet" href="./css/msgpanel.css">
  <link rel="stylesheet" href="./css/bootstrap-frm.css">
  <style media="screen">
  #mainPanel {
    height: 500px;
    width: 900px;
  }

  #title {
    line-height: 120px;
    margin: 0 auto;
    border-bottom: black 5px solid;
    height: 120px;
    width: 600px;
    text-align: center;
    font-size: 55px;
  }

  #buttons {
    margin: 20px auto 0;
    height: 300px;
    width: 700px;
  }

  #dataImportPanel{
    width: 1000px;
  }

  #tableMappingPanel{
    width: 1200px;
    height: 635px;
  }

  #mappingArea{
    width: 1000px;
    height: 535px;
    margin: 10px auto 0;
    position: absolute;
    left: 0;
    right: 0;
    text-align: center;
  }

  #homesidebut{
    bottom: 10%;
    background-color: rgb(32,28,28);

  }
  #homesidebut:hover{
    background-color: rgb(106,98,98);
  }

  #homesidebut:active {
    transform: translateY(5px);
  }
  </style>
</head>

<body>

  <button id="homesidebut" class="sidebut unselectable">
    Home
  </button>


  <div id="mainPanel" class="panel showPanel">
    <div id="title">
      <span>“ Data Import Tools ”</span>
    </div>
    <div id="buttons">
      <div class="ar">
        <button id="bt2" class="unselectable bt indexbt">数据库导出数据</button>
      </div>
      <div class="ar">
        <button id="bt1" class="unselectable bt indexbt">导入至数据库</button>
      </div>
      <div class="ar">
        <button id="bt4" class="unselectable bt indexbt">文件格式转换</button>
      </div>
      <div class="ar">
        <button id="bt3" class="unselectable bt indexbt">数据库之间转换</button>
      </div>
    </div>
  </div>

  <div id="dataImportPanel" class="panel dataImportPanel hidePanel">
    <span class="subtitle unselectable">导入至数据库</span>
    <span class="introduce unselectable">
      说明：请将xlsx、xls、csv格式文件导入，然后系统会返回源文件中的列名，然后需要您手动建立映射关系。</span>

    <button id="uploadbutton" class="unselectable bt funcbt">文件上传</button>
  </div>

  <div id="tableMappingPanel" class="panel hidePanel">
    <span class="subtitle unselectable">Mapping</span>
    <div id="mappingArea" class="bootstrap-frm"></div>
    <button id="mappingbut" type="button" class="funcbt bt pexit">确定映射</button>
  </div>

  <!-- 消息弹窗 -->
  <div class="curtain unselectable" id="c2">
    <div class="msgpanel hidePanel" id="p2">
      <div class="ptitle">

      </div>
      <div class="pmessage">
      </div>
      <button class="bt funcbt pexit" id="pexit2">好的</button>
    </div>
  </div>

  <script type="text/javascript" src="./js/tool.js"></script>
  <script type="text/javascript" src="./js/main.js"></script>
  <script type="text/javascript" src="./js/AjaxReq.js"></script>
  <script type="text/javascript" src="./js/uploadbut.js"></script>
  <script type="text/javascript">
  var pexit2 = document.getElementById('pexit2')
  var c2 = document.getElementById('c2')
  var p2 = document.getElementById('p2')


  var mainPanel = document.getElementById('mainPanel')
  var bt1 = document.getElementById('bt1')
  var dataImportPanel = document.getElementById('dataImportPanel')
  var uploadbutton = document.getElementById('uploadbutton')
  var acceptableFileArr = ['jpg', 'png']

  var mappingbut = document.getElementById('mappingbut')

  mappingbut.onclick = function () {
    let mappingJson = getMappingMsg()
    let fd = new FormData()
    fd.append('mapping', mappingJson)
    postReq('http://localhost:8080/mapHandle', function () {
      console.log(xmlhttp)
    }, fd)
  }

  bt1.onclick = function () {
    hideMainPanel(mainPanel)
    showSecondPanel(dataImportPanel)
  }

  uploadbutton.onclick = function () {
    uploadbut(1, acceptableFileArr, 'http://localhost:8080/ajax')
  }
  </script>
</body>

</html>
